import streamlit as st
import plotly.express as px

# 16가지 MBTI에 대한 전공 선호 데이터
mbti_major_data = {
    "INTJ": {
        "전공": ["컴퓨터공학", "신소재공학", "수학과", "기계공학", "물리학과"],
        "비율": [30, 25, 20, 15, 10],
    },
    "INTP": {
        "전공": ["물리학과", "컴퓨터공학", "수학과", "철학과", "인공지능학과"],
        "비율": [28, 24, 20, 16, 12],
    },
    "ENTJ": {
        "전공": ["경영학과", "경제학과", "정치외교학", "산업공학", "법학과"],
        "비율": [30, 25, 18, 15, 12],
    },
    "ENTP": {
        "전공": ["창업학", "광고홍보학", "미디어커뮤니케이션", "콘텐츠디자인", "컴퓨터공학"],
        "비율": [26, 22, 20, 18, 14],
    },
    "INFJ": {
        "전공": ["심리학과", "교육학과", "사회복지학", "철학과", "문예창작과"],
        "비율": [30, 25, 20, 15, 10],
    },
    "INFP": {
        "전공": ["문예창작과", "심리학과", "교육학과", "사회복지학", "디자인학과"],
        "비율": [28, 24, 20, 15, 13],
    },
    "ENFJ": {
        "전공": ["교육학과", "커뮤니케이션학", "심리학과", "사회복지학", "국제학"],
        "비율": [29, 25, 20, 14, 12],
    },
    "ENFP": {
        "전공": ["광고홍보학", "연극영화학", "콘텐츠디자인", "교육학과", "국제학"],
        "비율": [27, 23, 20, 16, 14],
    },
    "ISTJ": {
        "전공": ["회계학과", "행정학과", "법학과", "토목공학과", "간호학과"],
        "비율": [32, 25, 18, 15, 10],
    },
    "ISFJ": {
        "전공": ["간호학과", "보건행정학", "사회복지학", "유아교육과", "특수교육과"],
        "비율": [33, 25, 17, 15, 10],
    },
    "ESTJ": {
        "전공": ["경영학과", "법학과", "경찰행정학", "군사학과", "산업공학"],
        "비율": [30, 24, 18, 16, 12],
    },
    "ESFJ": {
        "전공": ["간호학과", "사회복지학", "교육학과", "호텔관광학", "보건행정학"],
        "비율": [30, 26, 18, 14, 12],
    },
    "ISTP": {
        "전공": ["기계공학", "전기전자공학", "응급구조학", "항공정비학과", "자동차공학"],
        "비율": [28, 25, 20, 15, 12],
    },
    "ISFP": {
        "전공": ["디자인학과", "시각예술", "실내건축학", "유아교육과", "간호학과"],
        "비율": [27, 23, 20, 16, 14],
    },
    "ESTP": {
        "전공": ["경영학과", "스포츠과학", "응급구조학", "군사학과", "마케팅학과"],
        "비율": [29, 24, 18, 15, 14],
    },
    "ESFP": {
        "전공": ["연극영화학", "뷰티디자인", "호텔관광학", "유아교육과", "예술학과"],
        "비율": [30, 24, 20, 15, 11],
    },
}

# Streamlit 앱 설정
st.set_page_config(page_title="MBTI 전공 선호도 시각화", layout="centered")

st.title("📊 MBTI별 전공 선호도 분석기")
st.write("MBTI를 선택하면 해당 유형이 선호하는 전공을 시각적으로 확인할 수 있어요!")

# 사용자 MBTI 선택
mbti_options = list(mbti_major_data.keys())
selected_mbti = st.selectbox("당신의 MBTI를 선택하세요:", mbti_options)

# 그래프 출력
if selected_mbti:
    data = mbti_major_data[selected_mbti]
    fig = px.bar(
        x=data["전공"],
        y=data["비율"],
        labels={"x": "전공", "y": "선호 비율 (%)"},
        title=f"{selected_mbti} 유형이 선호하는 전공 Top 5",
        color=data["전공"],
        color_discrete_sequence=px.colors.qualitative.Pastel
    )
    fig.update_layout(yaxis_range=[0, 40])
    st.plotly_chart(fig)
